@using CookLook.Models;
@using CookLook.Services;
@page "/"
@inject IRecipeSearchService recipeSearchService;

<h1>Search for a recipe</h1>

@if (recipes == null)
{
    <p><em>Waiting for your delicious input...</em></p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>URL</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var recipe in recipes)
            {
                <tr>
                    <td>@recipe.Label</td>
                    <td>@recipe.Url</td>
                </tr>
            }
        </tbody>
    </table>
}
<input type="text" @bind-value="@searchTerm" />
<input type="button" value="Search" @onclick="@SearchRecipes" />


<SurveyPrompt Title="How is Blazor working for you?" />


@code {


    private string searchTerm;
    private List<Recipe> recipes;

    async Task SearchRecipes()
    {
        recipes = await recipeSearchService.SearchRecipesAsync(searchTerm);
    }
}